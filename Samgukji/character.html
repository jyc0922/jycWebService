<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>삼국지 인물론</title>
    <style>
        /* CSS Variables for consistent styling and easy modification */
        :root {
            --header-height: 80px;
            --footer-height: 60px;
            --gap-desktop: 20px;
            --gap-mobile: 15px;
            --sidebar-width-desktop: 25%;
            
            /* 양피지 느낌의 색상 팔레트 */
            --primary-bg-color: rgba(245, 241, 230, 0.95); /* 양피지 베이스 */
            --secondary-bg-color: rgba(250, 248, 240, 0.9); /* 밝은 양피지 */
            --content-bg-color: rgba(252, 250, 245, 0.95); /* 매우 밝은 양피지 */
            --article-bg-color: rgba(248, 244, 235, 0.9); /* 중간 양피지 */
            
            /* 텍스트 색상 */
            --text-color: #2c2c2c; /* 진한 회색 */
            --link-color: #8B4513; /* 갈색 링크 */
            --link-hover-color: #A0522D; /* 호버 시 더 진한 갈색 */
            
            /* 테두리 및 그림자 */
            --border-color: #D2B48C; /* 탄 베이지 */
            --shadow-color: rgba(139, 69, 19, 0.2); /* 갈색 그림자 */
            
            /* 탭 스타일 */
            --tab-label-bg: #F5F5DC; /* 베이지 */
            --tab-label-active-bg: #8B4513; /* 갈색 */
            --tab-label-color: #5D4037; /* 진한 갈색 */
            --tab-label-active-color: #F5F5DC; /* 베이지 */
            
            /* 테이블 스타일 - 세련된 디자인 */
            --table-border-color: #D2B48C; /* 탄 베이지 */
            --table-header-bg: linear-gradient(135deg, #8B4513, #A0522D); /* 갈색 그라데이션 */
            --table-header-color: #F5F5DC; /* 베이지 텍스트 */
            --table-row-even-bg: rgba(245, 241, 230, 0.6); /* 밝은 양피지 */
            --table-row-odd-bg: rgba(250, 248, 240, 0.8); /* 더 밝은 양피지 */
            --table-row-hover-bg: rgba(210, 180, 140, 0.3); /* 호버 시 탄 베이지 */
            
            /* 박스 스타일 */
            --box-bg-color: rgba(245, 241, 230, 0.9); /* 양피지 */
            --box-border-color: #D2B48C; /* 탄 베이지 */
            
            /* 푸터 텍스트 */
            --footer-text-color: #5D4037; /* 진한 갈색 */
        }

        body {
            display: grid;
            background: url(https://i.pinimg.com/736x/c8/1e/35/c81e357bd8a4004f19c8493c60ff529a.jpg) no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            min-height: 100vh; /* Ensure body takes full viewport height */
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Prefer Inter if available, fallback to Segoe UI */
            color: var(--text-color);
            overflow-x: hidden; /* Prevent horizontal scrolling */

            /* Desktop layout using CSS Grid */
            grid-template-columns: var(--sidebar-width-desktop) 1fr;
            grid-template-rows: var(--header-height) auto 1fr var(--footer-height);
            grid-template-areas:
                "header header"
                "nav nav"
                "aside main"
                "footer footer";
            gap: var(--gap-desktop); /* Gap between grid items */
        }

        /* Header styling */
        header {
            grid-area: header;
            background-color: var(--primary-bg-color);
            text-align: center;
            font-size: 2.5em; /* Responsive font size for larger screens */
            line-height: var(--header-height);
            color: var(--link-color);
            text-shadow: 2px 2px 4px var(--shadow-color);
            border-bottom: 2px solid var(--border-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 15px 15px; /* Rounded bottom corners */
        }

        header h1 {
            margin: 0; /* Remove default margin for h1 */
            font-size: 1em; /* Make h1 inherit parent's font-size set above */
        }

        /* Footer styling */
        footer {
            grid-area: footer;
            background-color: var(--primary-bg-color);
            font-size: 0.9em;
            text-align: center;
            line-height: var(--footer-height);
            color: var(--footer-text-color); /* Darker text color */
            padding: 0 10px;
            border-top: 2px solid var(--border-color);
            box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 15px 15px 0 0; /* Rounded top corners */
        }

        footer a {
            color: var(--footer-text-color); /* Darker link color */
            text-decoration: none;
            margin: 0 5px;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: var(--link-hover-color);
        }

        /* Navigation styling (tab container) */
        nav {
            grid-area: nav;
            background-color: var(--primary-bg-color);
            padding: 10px 20px;
            box-sizing: border-box;
            display: flex;
            flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
            justify-content: center; /* Center nav items */
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 0, 0.3);
            border-radius: 10px; /* Slightly rounded overall nav */
            margin: 0 var(--gap-desktop); /* Horizontal margin to match grid gap */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .tab-container {
            /* nav와 똑같이 동작하도록 복사 */
            grid-area: nav;
            background-color: var(--primary-bg-color);
            padding: 10px 20px;
            box-sizing: border-box;
            display: block; /* flex 대신 카드 그리드(.nav-grid)만 감싸도록 block 처리 */
            margin: 0 var(--gap-desktop);
        }

        /* Hide radio buttons */
        input[type="radio"] {
            display: none;
        }

        /* Style for tab labels (buttons) */
        label {
            display: inline-block;
            padding: 12px 20px;
            background-color: var(--tab-label-bg);
            margin: 0 5px 10px 5px; /* Margin around labels */
            cursor: pointer;
            border-radius: 8px 8px 0 0; /* Rounded top corners for tabs */
            transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            font-weight: bold;
            color: var(--tab-label-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            white-space: nowrap; /* Prevent tab labels from breaking lines */
        }

        label:hover {
            background-color: #d0d0d0; /* Darker grey on hover */
        }

        /* Style for checked tab label */
        input[type="radio"]:checked + label {
            background-color: var(--tab-label-active-bg);
            color: var(--tab-label-active-color);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* More pronounced shadow when active */
            transform: translateY(-2px); /* Slight lift effect */
        }

        /* Common style for tab content */
        .content {
            display: none; /* Hidden by default */
            width: 100%; /* Take full width within its container */
            padding: var(--gap-desktop);
            border-radius: 0 18px 18px 18px; /* Rounded corners for content box */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            margin-top: 10px;
            background-color: var(--article-bg-color); /* Consistent background */
            color: var(--text-color);
            text-align: left;
            box-sizing: border-box; /* Include padding in width */
        }

        .content h4 {
            color: var(--text-color);
            margin-top: 0;
            font-size: 1.4em;
            text-align: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .content p {
            line-height: 1.6;
        }

        /* Show active tab content */
        #tab1:checked ~ #content1,
        #tab2:checked ~ #content2,
        #tab3:checked ~ #content3,
        #tab4:checked ~ #content4,
        #tab5:checked ~ #content5 {
            display: block; /* Display the active tab content */
        }

        /* Aside (sidebar) styling */
        aside {
            grid-area: aside;
            background-color: var(--secondary-bg-color);
            padding: var(--gap-desktop);
            box-shadow: 2px 0 5px var(--shadow-color);
            overflow-y: auto;
            border-radius: 10px;
            margin-left: var(--gap-desktop);
            box-sizing: border-box;
            display: grid; /* flex -> grid로 변경 */
            grid-template-columns: 1fr 1fr; /* 2열 그리드 */
            gap: 16px; /* 버튼 그룹 간 간격 */
            align-items: start;
        }

        aside article {
            width: 100%;
            grid-column: 1 / -1; /* article(후한의 멸망)은 2칸 전체 차지 */
        }

        aside h3 {
            color: var(--text-color);
            margin-top: 0;
            font-size: 1.3em;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 20px;
            font-family: 'Georgia', serif;
        }

        /* Box styling within aside */
        .box {
            background: linear-gradient(135deg, var(--box-bg-color), var(--secondary-bg-color));
            box-shadow: 0 4px 12px var(--shadow-color);
            margin: 0; /* Removed auto margin, now flex container handles centering */
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            box-sizing: border-box;
            border: 2px solid var(--border-color);
            width: 100%; /* Ensure box takes full width of its parent article */
            transition: all 0.3s ease;
        }

        .box:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px var(--shadow-color);
        }

        .box h2 {
            text-align: center;
            color: var(--text-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-family: 'Georgia', serif;
            font-weight: bold;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .box ol {
            padding-left: 25px;
            line-height: 1.8;
            color: var(--text-color);
        }

        .box ol li {
            margin-bottom: 10px;
            font-family: 'Georgia', serif;
        }

        /* Main content area styling */
        main {
            grid-area: main;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive grid for articles */
            gap: var(--gap-desktop);
            background-color: var(--content-bg-color);
            padding: var(--gap-desktop);
            overflow-y: auto; /* Allow scrolling for long content */
            border-radius: 10px;
            margin-right: var(--gap-desktop); /* Right margin to align with grid */
            box-sizing: border-box;
        }

        /* Article styling within main content */
        main article {
            background-color: var(--article-bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 3px 3px 8px var(--shadow-color);
            padding: 15px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-sizing: border-box;
        }

        /* Table styling */
        table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            background-color: var(--content-bg-color);
            box-shadow: 0 4px 15px var(--shadow-color);
            border-radius: 12px; /* 더 둥근 모서리 */
            overflow: hidden; /* Hide overflowing borders for rounded corners */
            border: 2px solid var(--border-color);
        }

        caption {
            font-size: 1.5em;
            color: var(--text-color);
            margin-bottom: 15px;
            font-weight: bold;
            padding: 15px 0;
            text-align: center;
            background: linear-gradient(135deg, var(--border-color), var(--box-bg-color));
            border-radius: 8px;
            box-shadow: 0 2px 8px var(--shadow-color);
            font-family: 'Georgia', 'Times New Roman', serif;
            letter-spacing: 1px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 15px 18px;
            border: 1px solid var(--border-color);
            text-align: center;
            box-sizing: border-box;
            transition: background-color 0.3s ease;
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.4;
        }

        th {
            background: var(--table-header-bg);
            color: var(--table-header-color);
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            font-size: 1.1em;
            font-family: 'Georgia', 'Times New Roman', serif;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-variant: small-caps;
        }

        td {
            font-size: 1em;
            font-weight: 500;
            color: var(--text-color);
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        /* 특별한 셀 스타일링 */
        td:first-child {
            font-weight: bold;
            color: var(--link-color);
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(210, 180, 140, 0.1));
        }

        /* 숫자 데이터 셀 */
        td:nth-child(3),
        td:nth-child(4),
        td:nth-child(5) {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: var(--link-hover-color);
        }

        /* 특정 텍스트 스타일링 - 클래스 기반 */
        .highlight-text {
            font-weight: bold;
            color: var(--link-color);
            font-family: 'Georgia', 'Times New Roman', serif;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.1);
            letter-spacing: 0.3px;
        }

        .era-text {
            font-size: 1.1em;
            color: #8B4513;
            font-weight: 700;
        }

        .category-text {
            font-weight: 600;
            color: #A0522D;
            font-style: italic;
        }

        .region-text {
            font-weight: 600;
            color: #8B4513;
        }

        .event-text {
            font-weight: 600;
            color: #CD853F;
        }

        .literature-text {
            font-weight: 600;
            color: #D2691E;
            font-style: italic;
        }

        tr:nth-child(even) {
            background-color: var(--table-row-even-bg);
        }

        tr:nth-child(odd) {
            background-color: var(--table-row-odd-bg);
        }

        /* 테이블 행 호버 효과 */
        tr:hover {
            background-color: var(--table-row-hover-bg);
            transform: scale(1.01);
            transition: all 0.3s ease;
        }

        /* New section styling for the "시대 흐름" content */
        .time-flow-overlay { /* Changed class to denote overlay behavior */
            position: fixed; /* Position relative to the viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Dark semi-transparent background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Bring to front */
            opacity: 0; /* Start hidden with opacity */
            visibility: hidden; /* Start hidden with visibility */
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        /* 오버레이 내부 닫기 버튼 스타일 */
        .overlay-close-btn {
            position: fixed; /* 고정 위치 */
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            border: 2px solid rgba(255,255,255,0.3);
            font-size: 2em;
            width: 50px;
            height: 50px;
            line-height: 46px;
            text-align: center;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1002; /* 더 높은 z-index */
            transition: all 0.3s ease;
        }

        .overlay-close-btn:hover {
            background: rgba(255,255,255,0.2);
            color: #000;
            border-color: rgba(0,0,0,0.5);
            transform: scale(1.1);
        }

        .time-flow-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .time-flow-overlay .image-wrapper {
            background-color: rgba(0, 0, 0, 0.95); /* 거의 검은 배경 */
            padding: 0; /* 패딩 제거 */
            border-radius: 0; /* 모서리 둥글게 제거 */
            box-shadow: none; /* 그림자 제거 */
            max-width: 100%; /* 전체 화면 너비 */
            max-height: 100%; /* 전체 화면 높이 */
            width: 100vw; /* 뷰포트 전체 너비 */
            height: 100vh; /* 뷰포트 전체 높이 */
            overflow: hidden; /* 스크롤 제거 */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: relative;
        }

        .time-flow-overlay h3 {
            font-size: 1.8em;
            color: var(--text-color);
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            padding-bottom: 10px;
            text-align: center;
        }

        .time-flow-overlay img {
            max-width: 100vw; /* 뷰포트 전체 너비 */
            max-height: 100vh; /* 뷰포트 전체 높이 */
            width: auto; /* 자동 너비 */
            height: auto; /* 자동 높이 */
            border-radius: 0; /* 모서리 둥글게 제거 */
            box-shadow: none; /* 그림자 제거 */
            display: block;
            margin: 0 auto;
            object-fit: contain; /* 비율 유지하면서 맞춤 */
        }

        /*  버튼 그룹(범주) 스타일         */
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;  /* 좌우 균형 배치 */
            gap: 12px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 8px;
            padding: 16px 14px;
            background: linear-gradient(135deg, var(--box-bg-color), var(--secondary-bg-color));
            box-shadow: 0 4px 12px var(--shadow-color);
        }
        
        .btn-group legend {
            padding: 0 12px;
            font-weight: 600;
            font-family: 'Georgia', serif;
            color: var(--text-color);
            background: var(--content-bg-color);
            border-radius: 6px;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        /* === ② 탭 카드를 그리드로 배치 === */
        .nav-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            list-style: none;
        }
        .nav-item {
            margin: 0 auto;
        }

        /* === ③ 카드 스타일 === */
        .nav-item {
        display: flex;
        flex-direction: column;
        background: var(--box-bg-color);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 8px var(--shadow-color);
        }
        
        .nav-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px var(--shadow-color);
        }

        /* === ④ 카드 내 이미지 스타일 === */
        .nav-item img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        }

        /* === ⑤ 카드 내 텍스트 스타일 === */
        .nav-item h3 {
        margin: 12px 0 6px;
        color: var(--text-color);
        font-family: 'Georgia', serif;
        font-size: 1.1em;
        text-align: center;
        }
        
        .nav-item p {
        margin: 0 10px 15px;
        color: var(--text-color);
        font-size: 0.9em;
        text-align: center;
        line-height: 1.4;
        }


        /*  버튼 기본 스타일 재정의         */
        .toggle-btn {
            flex: 1 1 120px;               /* 최소 120px, 균등 확장 */
            max-width: 180px;
            margin: 6px 4px;
            padding: 12px 0;
            background: linear-gradient(135deg, var(--border-color), var(--box-bg-color));
            color: var(--text-color);
            font-family: 'Georgia', serif;
            font-size: 0.95em;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 8px var(--shadow-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-btn:hover {
            background: linear-gradient(135deg, var(--link-hover-color), var(--border-color));
            color: var(--tab-label-active-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px var(--shadow-color);
        }

        /* Responsive Design Media Queries */

        /* Tablet and smaller desktops */
        @media (max-width: 1024px) {
            body {
                gap: var(--gap-mobile);
                /* Adjust sidebar width slightly */
                grid-template-columns: 30% 1fr;
            }

            header {
                font-size: 2.2em;
            }

            nav {
                margin: 0 var(--gap-mobile);
            }

            aside {
                grid-template-columns: 1fr; /* 태블릿 이하에서는 다시 1열 */
            }

            aside article {
                grid-column: auto;
            }

            main {
                margin-right: var(--gap-mobile);
                padding: var(--gap-mobile);
            }

            label {
                padding: 10px 15px;
                font-size: 0.95em;
                margin: 0 4px 8px 4px;
            }

            .content {
                padding: var(--gap-mobile);
            }

            .time-flow-overlay .image-wrapper {
                padding: var(--gap-mobile);
            }
        }


        /* Mobile devices */
        @media (max-width: 768px) {
            body {
                grid-template-columns: 1fr; /* Single column layout */
                grid-template-rows: var(--header-height) auto auto 1fr var(--footer-height); /* Nav, aside, main stack */
                grid-template-areas:
                    "header"
                    "nav"
                    "aside"
                    "main"
                    "footer";
                gap: var(--gap-mobile);
            }

            header {
                font-size: 1.8em; /* Smaller font size for header */
                line-height: normal; /* Allow height to adjust based on padding */
                padding: 10px;
                border-radius: 0; /* Remove rounded corners on smaller screens */
            }

            footer {
                border-radius: 0; /* Remove rounded corners on smaller screens */
            }

            nav {
                flex-direction: column; /* Stack nav labels vertically */
                align-items: stretch; /* Stretch labels to full width */
                padding: 10px;
                margin: 0; /* Remove horizontal margin */
                border-radius: 0;
            }

            label {
                margin: 5px 0; /* Vertical margin for stacked labels */
                border-radius: 8px; /* Full rounded corners for stacked labels */
                text-align: center;
                width: 100%; /* Make label take full width */
            }

            aside, main {
                padding: var(--gap-mobile);
                margin: 0; /* Remove side margins */
                border-radius: 0; /* Remove rounded corners */
            }

            main {
                grid-template-columns: 1fr; /* Stack articles vertically */
            }

            caption {
                font-size: 1.2em;
            }

            th, td {
                padding: 8px 10px; /* Smaller padding for table cells */
                font-size: 0.85em;
            }

            /* Adjust background for smaller screens to ensure visibility */
            body {
                background-size: auto 100%; /* Cover height, auto width */
                background-position: top center;
            }

            .time-flow-overlay .image-wrapper {
                max-width: 100vw;
                max-height: 100vh;
                width: 100vw;
                height: 100vh;
                padding: 0;
            }
            
            .time-flow-overlay img {
                max-width: 100vw;
                max-height: 100vh;
            }

            .overlay-close-btn {
                top: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
                line-height: 41px;
                font-size: 1.8em;
            }

            .toggle-btn {
                padding: 8px 12px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            header {
                font-size: 1.4em;
                padding: 8px;
            }

            .content {
                padding: 10px;
            }

            .box {
                margin: 8px auto;
                padding: 10px;
            }

            .box h2 {
                font-size: 1.1em;
            }

            table {
                font-size: 0.8em;
            }

            th, td {
                padding: 6px 8px;
            }

            .time-flow-overlay h3 {
                font-size: 1.3em;
            }

            .time-flow-overlay .image-wrapper {
                max-width: 100vw;
                max-height: 100vh;
                width: 100vw;
                height: 100vh;
                padding: 0;
            }
            
            .time-flow-overlay img {
                max-width: 100vw;
                max-height: 100vh;
            }

            .overlay-close-btn {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                line-height: 36px;
                font-size: 1.5em;
            }
        }

        .overlay-arrow-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.6);
            color: #fff;
            border: none;
            font-size: 2.5em;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1001;
            transition: background 0.2s;
        }
        #overlay-prev-btn { left: 30px; }
        #overlay-next-btn { right: 30px; }
        .overlay-arrow-btn:hover { background: rgba(255,255,255,0.3); color: #000; }
        @media (max-width: 768px) {
            .overlay-arrow-btn { width: 40px; height: 40px; font-size: 1.5em; }
            #overlay-prev-btn { left: 10px; }
            #overlay-next-btn { right: 10px; }
        }

        /* 인물 상세 모달 꾸미기 */
        #character-detail-overlay {
            background: rgba(30, 20, 10, 0.70);
            backdrop-filter: blur(2.5px);
            z-index: 1000;
        }
        #character-detail-overlay .image-wrapper {
            background: linear-gradient(135deg, #f8f4eb 80%, #e2d2b6 100%);
            border-radius: 32px;
            box-shadow: 0 8px 40px rgba(80,60,30,0.18);
            padding: 48px 36px 40px 36px;
            min-width: 60vw;
            min-height: 60vh;
            max-width: 900px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 32px;
            overflow-y: auto;
        }
        #character-detail-name-btn {
            font-size: 2.2em;
            padding: 26px 70px;
            border-radius: 20px;
            background: linear-gradient(135deg,#6a5acd,#483d8b); /* 모든 진영에 어울리는 보라-남색 계열 */
            color: #fff;
            border: none;
            cursor: pointer;
            box-shadow: 0 6px 24px rgba(0,0,0,0.18);
            font-weight: 900;
            margin-bottom: 0;
            margin-top: 0;
            letter-spacing: 1.5px;
            transition: background 0.25s, box-shadow 0.2s, transform 0.15s;
            outline: none;
            text-shadow: 1px 2px 8px rgba(80,60,30,0.10);
        }
        /* 진영별 색상 오버라이드 */
        .character-modal-name-btn.sun { background: linear-gradient(135deg,#228B22,#6B8E23); }
        .character-modal-name-btn.liu { background: linear-gradient(135deg,#A0522D,#D2691E); }
        .character-modal-name-btn.etc { background: linear-gradient(135deg,#4682B4,#708090); }
        #character-detail-alt-btns {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 18px 18px;
            width: 100%;
            max-width: 700px;
            margin-bottom: 0;
            justify-items: center;
            align-items: center;
            padding: 0 0 8px 0;
        }
        #character-detail-alt-btns .toggle-btn {
            font-size: 1.08em;
            padding: 12px 0;
            border-radius: 10px;
            min-width: 110px;
            background: linear-gradient(135deg,#8B4513,#A0522D);
            color: #fff;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.13);
            font-weight: bold;
            transition: background 0.2s, box-shadow 0.2s, transform 0.15s;
            margin: 0;
            outline: none;
        }
        #character-detail-alt-btns .toggle-btn:disabled {
            background: linear-gradient(135deg,#eaff00 40%, #00ffd0 100%);
            filter: brightness(1.08);
            box-shadow: 0 4px 16px rgba(139,69,19,0.18), 0 0 0 4px #7c3aed, 0 0 16px 4px #b39ddb;
            font-weight: 900;
            transform: scale(1.16);
            border: 3.5px solid #7c3aed;
            outline: 0;
            color: #e53935;
            z-index: 2;
            font-size: 1.25em;
            padding: 18px 0;
            border-radius: 16px;
            letter-spacing: 1.5px;
        }
        #character-detail-graph {
            width: 60vw !important;
            height: 60vh !important;
            min-width: 520px !important;
            min-height: 420px !important;
            max-width: 800px;
            max-height: 600px;
            background: linear-gradient(135deg,#f8f4eb 80%, #e2d2b6 100%);
            border-radius: 24px;
            box-shadow: 0 4px 32px rgba(80,60,30,0.13);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 1.35em;
            margin-top: 0;
            margin-bottom: 0;
            border: 2.5px solid #d2b48c;
            font-family: 'Georgia', 'Inter', serif;
        }
        @media (max-width: 900px) {
            #character-detail-overlay .image-wrapper {
                min-width: 90vw;
                padding: 18px 2vw 18px 2vw;
            }
            #character-detail-graph {
                min-width: 90vw !important;
                width: 98vw !important;
                height: 38vh !important;
                min-height: 220px !important;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>삼국지 인물론</h1>
    </header>

    <nav class="tab-container">
        <ul class="nav-grid">
            <li>
                <button class="nav-item active" data-tab="tab1">
                    <img src="./character/samgukji_character.jpg" alt="인물론" onerror="this.onerror=null; this.src='https://placehold.co/400x300/fff/000?text=No+Image';">
                    <h3>인물론</h3>
                    <p>삼국지 주요 인물들의 성격과 전략을 분석합니다.</p>
                </button>
            </li>
        </ul>
    </nav>

    <aside>
        <article>
            <h3>삼국지 인물론 소개</h3>
            <div class="box">
                <p>삼국지의 대표 인물들과 각 진영의 주요 인물들을 한눈에 살펴보세요.<br>각 인물 카드를 클릭하면 더 자세한 정보를 볼 수 있습니다.</p>
            </div>
        </article>
    </aside>

    <main>
        <article>
            <h2 style="display:flex; justify-content:center; text-align:center;">
                <button id="btn-cao-faction" style="font-size:1.2em; padding:10px 24px; border-radius:8px; background:linear-gradient(135deg,#8B4513,#A0522D); color:#fff; border:none; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15); font-weight:bold;">조조 진영</button>
            </h2>
            <div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center;">
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_caocao.jpg" alt="조조" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>위나라 군주</h3>
                    <p>조조<br>위나라의 창업자, 난세의 간웅</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_zhangliao.jpg" alt="장료" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>위나라 장군</h3>
                    <p>장료<br>합비대전의 영웅, 위나라의 명장</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_guojia.jpg" alt="곽가" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>위나라 모사</h3>
                    <p>곽가<br>조조의 책사, 지략의 귀재</p>
                </div>
            </div>
        </article>
        <article>
            <h2 style="display:flex; justify-content:center; text-align:center;">
                <button id="btn-sun-faction" style="font-size:1.2em; padding:10px 24px; border-radius:8px; background:linear-gradient(135deg,#228B22,#6B8E23); color:#fff; border:none; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15); font-weight:bold;">손권 진영</button>
            </h2>
            <div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center;">
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_sunquan.jpg" alt="손권" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>오나라 군주</h3>
                    <p>손권<br>오나라의 군주, 강동의 호랑이</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_zhouyu.jpg" alt="주유" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>오나라 장군</h3>
                    <p>주유<br>적벽대전 지휘관, 오나라의 명장</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_lusu.jpg" alt="노숙" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>오나라 모사</h3>
                    <p>노숙<br>오나라의 책사, 외교의 달인</p>
                </div>
            </div>
        </article>
        <article>
            <h2 style="display:flex; justify-content:center; text-align:center;">
                <button id="btn-liu-faction" style="font-size:1.2em; padding:10px 24px; border-radius:8px; background:linear-gradient(135deg,#A0522D,#D2691E); color:#fff; border:none; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15); font-weight:bold;">유비 진영</button>
            </h2>
            <div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center;">
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_liubei.jpg" alt="유비" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>촉나라 군주</h3>
                    <p>유비<br>촉한의 황제, 인의의 화신</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_guanyu.jpg" alt="관우" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>촉나라 장군</h3>
                    <p>관우<br>의리의 화신, 오관참육장</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_zhugeliang.jpg" alt="제갈량" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>촉나라 모사</h3>
                    <p>제갈량<br>촉한의 재상, 지략의 대명사</p>
                </div>
            </div>
        </article>
        <article>
            <h2 style="display:flex; justify-content:center; text-align:center;">
                <button id="btn-etc-faction" style="font-size:1.2em; padding:10px 24px; border-radius:8px; background:linear-gradient(135deg,#4682B4,#708090); color:#fff; border:none; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15); font-weight:bold;">기타 진영</button>
            </h2>
            <div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center;">
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_yuanshao.jpg" alt="원소" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>기타 군주</h3>
                    <p>원소<br>관도대전의 주역, 북방의 군웅</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_lvbu.jpg" alt="여포" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>기타 장군</h3>
                    <p>여포<br>삼국최고의 무장, 배신의 아이콘</p>
                </div>
                <div class="nav-item" style="width:220px;">
                    <img src="./character/samgukji_chengong.jpg" alt="진궁" onerror="this.onerror=null; this.src='https://placehold.co/220x150/fff/000?text=No+Image';">
                    <h3>기타 모사</h3>
                    <p>진궁<br>여포의 책사, 비운의 참모</p>
                </div>
            </div>
        </article>
    </main>

    <footer>
        저작권&copy;2025 김우성 /
        <a href="https://naver.com" target="_blank">네이버</a>
        <a href="https://chatgpt.com/" target="_blank">ChatGPT</a>
        <a href="https://gemini.google.com/" target="_blank">Gemini</a>
    </footer>

    <!-- 시대 흐름 내용을 오버레이로 변경 -->
    <div id="time-flow-overlay" class="time-flow-overlay">
        <button id="overlay-prev-btn" class="overlay-arrow-btn" aria-label="이전">&#8592;</button>
        <button id="overlay-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <button id="overlay-next-btn" class="overlay-arrow-btn" aria-label="다음">&#8594;</button>
        <div class="image-wrapper">
            <img id="overlay-display-image" src="samgukji02.png" onerror="this.onerror=null; this.src='https://placehold.co/800x450/fff/000?text=이미지+로드+실패';" alt="확대 이미지">
        </div>
    </div>

    <!-- 조조 진영 오버레이 모달 -->
    <div id="cao-faction-overlay" class="time-flow-overlay">
        <button id="cao-faction-overlay-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <div class="image-wrapper">
            <img src="./character/samgukji_weiguo.jpg" alt="조조 진영" style="max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.4);">
            <h3 style="color:#fff; margin-top:20px;">조조 진영</h3>
        </div>
    </div>
    <!-- 손권 진영 오버레이 모달 -->
    <div id="sun-faction-overlay" class="time-flow-overlay">
        <button id="sun-faction-overlay-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <div class="image-wrapper">
            <img src="./character/samgukji_wuguo.jpg" alt="손권 진영" style="max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.4);">
            <h3 style="color:#fff; margin-top:20px;">손권 진영</h3>
        </div>
    </div>
    <!-- 유비 진영 오버레이 모달 -->
    <div id="liu-faction-overlay" class="time-flow-overlay">
        <button id="liu-faction-overlay-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <div class="image-wrapper">
            <img src="./character/samgukji_shuguo.jpg" alt="유비 진영" style="max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.4);">
            <h3 style="color:#fff; margin-top:20px;">유비 진영</h3>
        </div>
    </div>
    <!-- 기타 진영 오버레이 모달 -->
    <div id="etc-faction-overlay" class="time-flow-overlay">
        <button id="etc-faction-overlay-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <div class="image-wrapper">
            <img src="./character/samgukji_18luzhuhou.jpg" alt="기타 진영" style="max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.4);">
            <h3 style="color:#fff; margin-top:20px;">기타 진영</h3>
        </div>
    </div>
    <!-- 인물 상세 오버레이 프레임 -->
    <div id="character-detail-overlay" class="time-flow-overlay">
        <button id="character-detail-close-btn" class="overlay-close-btn" aria-label="닫기">×</button>
        <div class="image-wrapper">
            <button id="character-detail-name-btn" class="character-modal-name-btn">인물명</button>
            <div id="character-detail-alt-btns"></div>
            <div id="character-detail-graph">
                (여기에 능력치 그래프가 표시됩니다)
            </div>
        </div>
    </div>
<script>
(function() {
    let currentList = [];
    let currentIdx = 0;
    const aside = document.querySelector('aside');
    const overlay = document.getElementById('time-flow-overlay');
    const img = document.getElementById('overlay-display-image');
    const prevBtn = document.getElementById('overlay-prev-btn');
    const nextBtn = document.getElementById('overlay-next-btn');
    const closeBtn = document.getElementById('overlay-close-btn');

    function show(idx) {
        if (!currentList.length) return;
        img.src = currentList[idx].src;
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function hideOverlay() {
        overlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    aside.addEventListener('click', function(e) {
        const btn = e.target.closest('button.toggle-btn');
        if (!btn) return;
        const fieldset = btn.closest('fieldset');
        const btns = Array.from(fieldset.querySelectorAll('button.toggle-btn'));
        currentList = btns.map(b => ({ src: b.dataset.imageSrc }));
        currentIdx = btns.indexOf(btn);
        show(currentIdx);
    });
    prevBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentIdx = (currentIdx - 1 + currentList.length) % currentList.length;
        show(currentIdx);
    });
    nextBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentIdx = (currentIdx + 1) % currentList.length;
        show(currentIdx);
    });
    closeBtn.addEventListener('click', function() {
        hideOverlay();
    });
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            hideOverlay();
        }
    });
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            hideOverlay();
        }
    });

    // 조조 진영 오버레이
    const btnCao = document.getElementById('btn-cao-faction');
    const overlayCao = document.getElementById('cao-faction-overlay');
    const closeCao = document.getElementById('cao-faction-overlay-close-btn');
    btnCao.addEventListener('click', function() {
        overlayCao.classList.add('active');
        document.body.style.overflow = 'hidden';
    });
    closeCao.addEventListener('click', function() {
        overlayCao.classList.remove('active');
        document.body.style.overflow = '';
    });
    overlayCao.addEventListener('click', function(e) {
        if (e.target === overlayCao) {
            overlayCao.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            overlayCao.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // 손권 진영 오버레이
    const btnSun = document.getElementById('btn-sun-faction');
    const overlaySun = document.getElementById('sun-faction-overlay');
    const closeSun = document.getElementById('sun-faction-overlay-close-btn');
    btnSun.addEventListener('click', function() {
        overlaySun.classList.add('active');
        document.body.style.overflow = 'hidden';
    });
    closeSun.addEventListener('click', function() {
        overlaySun.classList.remove('active');
        document.body.style.overflow = '';
    });
    overlaySun.addEventListener('click', function(e) {
        if (e.target === overlaySun) {
            overlaySun.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // 유비 진영 오버레이
    const btnLiu = document.getElementById('btn-liu-faction');
    const overlayLiu = document.getElementById('liu-faction-overlay');
    const closeLiu = document.getElementById('liu-faction-overlay-close-btn');
    btnLiu.addEventListener('click', function() {
        overlayLiu.classList.add('active');
        document.body.style.overflow = 'hidden';
    });
    closeLiu.addEventListener('click', function() {
        overlayLiu.classList.remove('active');
        document.body.style.overflow = '';
    });
    overlayLiu.addEventListener('click', function(e) {
        if (e.target === overlayLiu) {
            overlayLiu.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // 기타 진영 오버레이
    const btnEtc = document.getElementById('btn-etc-faction');
    const overlayEtc = document.getElementById('etc-faction-overlay');
    const closeEtc = document.getElementById('etc-faction-overlay-close-btn');
    btnEtc.addEventListener('click', function() {
        overlayEtc.classList.add('active');
        document.body.style.overflow = 'hidden';
    });
    closeEtc.addEventListener('click', function() {
        overlayEtc.classList.remove('active');
        document.body.style.overflow = '';
    });
    overlayEtc.addEventListener('click', function(e) {
        if (e.target === overlayEtc) {
            overlayEtc.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // ESC 키로 닫기 (공통)
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            overlayCao.classList.remove('active');
            overlaySun.classList.remove('active');
            overlayLiu.classList.remove('active');
            overlayEtc.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // === 인물 상세 오버레이에 조비, 조예 버튼 추가 ===
    const charOverlay = document.getElementById('character-detail-overlay');
    const charNameBtn = document.getElementById('character-detail-name-btn');
    const charGraph = document.getElementById('character-detail-graph');
    const charAltBtns = document.getElementById('character-detail-alt-btns');
    let currentCharName = '';
    const lordStats = {
        '조조': [10, 10, 7, 10, 8, 10, 10, 5],
        '조비': [10, 9, 5, 9, 9, 9, 9, 5],
        '조예': [8, 8, 4, 7, 9, 8, 8, 6],
    };
    // nav-item(군주) 클릭 시 오버레이 표시 + 대체 버튼 생성
    document.querySelectorAll('.nav-item').forEach(function(card) {
        card.addEventListener('click', function(e) {
            const h3 = card.querySelector('h3');
            const p = card.querySelector('p');
            let name = '';
            if (p && p.innerHTML.includes('<br>')) {
                name = p.innerHTML.split('<br>')[0];
            } else if (h3) {
                name = h3.textContent;
            }
            charNameBtn.textContent = name;
            currentCharName = name;
            // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
            if (charStatMap[name]) {
                charGraph.innerHTML = '';
                let wrapper = charGraph.querySelector('.graph-border-wrapper');
                if (!wrapper) {
                    wrapper = document.createElement('div');
                    wrapper.className = 'graph-border-wrapper';
                    charGraph.appendChild(wrapper);
                }
                wrapper.innerHTML = '';
                const canvas = document.createElement('canvas');
                canvas.width = 343; canvas.height = 343;
                canvas.style.display = 'block';
                canvas.style.margin = '0 auto 10px auto';
                canvas.style.background = 'rgba(255,255,255,0.13)';
                canvas.style.borderRadius = '16px';
                drawRadarChart(canvas, charStatMap[name], statLabels);
                wrapper.appendChild(canvas);
            } else {
                charGraph.innerHTML = '(능력치 정보 없음)';
            }
            // 진영별 이름 버튼 색상 적용
            charNameBtn.classList.remove('sun','liu','etc');
            if (['손권','주유','노숙'].includes(name)) {
                charNameBtn.classList.add('sun');
            } else if (['유비','관우','제갈량'].includes(name)) {
                charNameBtn.classList.add('liu');
            } else if (['원소','여포','진궁'].includes(name)) {
                charNameBtn.classList.add('etc');
            }
            // 군주 박스에서 조조 클릭 시만 대체 버튼 보이기
            if (name === '조조') {
                charAltBtns.innerHTML = '';
                ['조조','조비','조예'].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '장료') {
                charAltBtns.innerHTML = '';
                [
                    '장료','우금','하후연','하후돈','하후모','무구검','허저','종회','서황','조휴','조홍','조장','조진','조인','조상','장합','진군','전위','등애','방덕','만총','이전',
                    '낙진','곽회','제갈탄','장수','모개'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '곽가') {
                charAltBtns.innerHTML = '';
                [
                    '곽가','가후','가충','관택','허유','사마의','사마사','사마소','순욱','순유','조식','진군','진림','정욱','두예','가규','화흠'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#8B4513)' : 'linear-gradient(135deg,#8B4513,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '손권') {
                charAltBtns.innerHTML = '';
                [
                    '손권','손책','손호','손견'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '주유') {
                charAltBtns.innerHTML = '';
                [
                    '정보','주유','감녕','주태','주준','주연','장흠','손준','태사자','진무','정봉','육강','육손','능통','여몽','황개','고상','제갈각','서성'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '노숙') {
                charAltBtns.innerHTML = '';
                [
                    '노숙','고옹','장홍','장소','보지','육개'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#228B22,#006400)' : 'linear-gradient(135deg,#006400,#228B22)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '유비') {
                charAltBtns.innerHTML = '';
                [
                    '유비','유선'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '관우') {
                charAltBtns.innerHTML = '';
                [
                    '관우','장비','조운','마초','황충','위연','강유','관평','관흥','장포','장익','마대','이엄'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '제갈량') {
                charAltBtns.innerHTML = '';
                [
                    '제갈량','이적','한숭','간옹','황권','장완','서서','손건','장송','진진','진등','마속','마량','폐의','미축','법정','방통','양의','이회'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#A0522D,#D2691E)' : 'linear-gradient(135deg,#D2691E,#A0522D)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '원소') {
                charAltBtns.innerHTML = '';
                [
                    '원소','원술','공손찬','유표','장로','마등','공융'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '여포') {
                charAltBtns.innerHTML = '';
                [
                    '여포','왕준','곽사','학소','하진','기령','고순','황조','황보숭','채모','동승','동차나','문추','모개','이각','노식'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else if (name === '진궁') {
                charAltBtns.innerHTML = '';
                [
                    '진궁','왕윤','왕보','괴월','곽도','사마휘','심배','저수','전풍','이유'
                ].forEach(function(nm) {
                    const btn = document.createElement('button');
                    btn.className = 'toggle-btn';
                    btn.style.fontSize = '1em';
                    btn.style.padding = '10px 24px';
                    btn.style.borderRadius = '8px';
                    btn.style.background = (nm === name) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                    btn.style.cursor = 'pointer';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                    btn.style.fontWeight = 'bold';
                    btn.textContent = nm;
                    if (nm === name) btn.disabled = true;
                    btn.addEventListener('click', function(ev) {
                        ev.stopPropagation();
                        charNameBtn.textContent = nm;
                        currentCharName = nm;
                        // charGraph.innerHTML = '(여기에 능력치 그래프가 표시됩니다)';
                        if (charStatMap[nm]) {
                            charGraph.innerHTML = '';
                            let wrapper = charGraph.querySelector('.graph-border-wrapper');
                            if (!wrapper) {
                                wrapper = document.createElement('div');
                                wrapper.className = 'graph-border-wrapper';
                                charGraph.appendChild(wrapper);
                            }
                            wrapper.innerHTML = '';
                            const canvas = document.createElement('canvas');
                            canvas.width = 343; canvas.height = 343;
                            canvas.style.display = 'block';
                            canvas.style.margin = '0 auto 10px auto';
                            canvas.style.background = 'rgba(255,255,255,0.13)';
                            canvas.style.borderRadius = '16px';
                            drawRadarChart(canvas, charStatMap[nm], statLabels);
                            wrapper.appendChild(canvas);
                        } else {
                            charGraph.innerHTML = '(능력치 정보 없음)';
                        }
                        Array.from(charAltBtns.children).forEach(b => {
                            b.style.background = (b.textContent === nm) ? 'linear-gradient(135deg,#4682B4,#708090)' : 'linear-gradient(135deg,#708090,#4682B4)';
                            b.disabled = (b.textContent === nm);
                        });
                    });
                    charAltBtns.appendChild(btn);
                });
            } else {
                charAltBtns.innerHTML = '';
            }
            charOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
    });
    // 인물 상세 오버레이 닫기(X 버튼, ESC, 바깥 클릭)
    const charClose = document.getElementById('character-detail-close-btn');
    charClose.addEventListener('click', function() {
        charOverlay.classList.remove('active');
        document.body.style.overflow = '';
        charAltBtns.innerHTML = '';
    });
    charOverlay.addEventListener('click', function(e) {
        if (e.target === charOverlay) {
            charOverlay.classList.remove('active');
            document.body.style.overflow = '';
            charAltBtns.innerHTML = '';
        }
    });
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            charOverlay.classList.remove('active');
            document.body.style.overflow = '';
            charAltBtns.innerHTML = '';
        }
    });

    // === 능력치 CSV 파싱 ===
    const charStatMap = {};
    const statLabels = ['통솔력','결단력','전투력','통찰력','인망','실행력','전략전술','의리'];
    const statOrder = ['통솔력','결단력','전투력','통찰력','인망','실행력','전략전술','의리'];
    // CSV 데이터 (173character.csv) - 빌트인으로 삽입
    const csvData = `인물,통솔력,결단력,전투력,통찰력,인망,실행력,전략전술,의리
이적,7,6,4,8,8,5,7,7
우금,9,7,3,5,5,8,5,3
원희,9,7,3,5,5,8,5,3
원술,2,2,1,2,1,3,3,1
원상,3,2,6,2,2,2,2,1
원소,6,2,5,4,4,4,2,3
원담,6,5,5,5,4,6,6,5
왕윤,9,7,2,8,8,9,9,7
왕준,9,9,5,9,7,9,9,7
왕평,6,7,7,7,7,7,5,8
왕보,5,5,4,7,6,4,5,6
괴월,7,8,4,9,4,8,9,1
가규,8,9,7,6,6,8,8,8
화흠,8,8,1,9,8,8,3,5
가후,6,9,2,9,8,9,9,6
곽가,5,8,1,8,5,8,8,8
곽사,6,5,7,1,1,5,1,1
학소,7,7,7,5,8,7,7,7
낙진,6,7,8,5,6,7,6,8
곽도,5,7,3,7,4,6,6,5
곽회,6,5,6,5,6,6,5,8
하후연,7,6,7,2,6,5,2,7
하후돈,9,5,9,4,7,6,4,7
하후모,1,3,1,1,2,3,2,1
가충,8,8,1,8,5,9,5,5
하진,6,2,4,4,3,4,7,5
관우,9,5,10,8,9,8,7,10
무구검,8,5,2,4,5,8,6,7
관흥,7,7,8,5,7,7,5,6
관소,5,5,6,6,5,5,5,7
한수,7,5,6,6,7,7,6,7
한숭,7,8,8,8,7,8,8,6
관택,6,7,3,7,7,7,6,6
감녕,8,8,9,9,2,5,7,8
한복,4,4,3,4,4,4,3,3
관평,7,6,8,6,7,6,5,8
간옹,5,6,4,7,7,6,7,7
안량,7,7,9,6,6,7,7,7
위연,8,8,9,5,3,7,7,4
강유,9,9,8,9,8,9,8,9
허저,7,8,9,5,7,8,9,8
허유,2,8,2,5,2,7,8,3
기령,7,7,9,5,5,7,4,8
엄안,8,6,8,6,7,6,5,7
한헌제,5,5,1,1,2,4,2,6
오의,6,5,5,6,5,5,4,6
황개,7,6,7,3,6,7,8,8
황권,6,7,5,7,7,7,6,8
고순,8,8,6,6,6,5,8,7
고상,5,5,4,4,5,4,5,6
황조,2,2,6,1,1,5,3,1
공손연,7,4,3,2,2,3,2,1
공손찬,8,7,9,5,5,7,3,8
황충,8,9,9,7,9,8,7,9
황보숭,8,6,5,6,7,7,8,8
공융,8,9,5,4,8,9,7,8
고옹,7,7,3,6,5,6,5,6
채모,7,6,5,3,4,5,4,1
사마의,9,9,6,10,9,10,10,6
사마염,8,8,9,8,9,8,9,9
사마휘,2,5,2,8,8,5,7,8
사마사,8,6,6,6,4,7,5,2
사마소,9,9,7,9,8,8,7,6
주창,7,7,9,5,8,7,7,9
주태,6,4,8,2,8,8,2,5
주유,10,9,8,9,9,8,8,9
주준,8,6,4,5,8,7,7,8
주연,6,7,7,6,6,7,8,7
순욱,9,9,8,7,9,7,9,9
순유,5,7,7,9,7,7,7,9
장완,8,7,5,8,9,6,5,9
종회,5,7,6,6,5,6,5,3
장흠,7,7,7,5,6,8,5,6
제갈각,4,4,3,3,4,6,4,3
제갈근,6,6,5,7,10,6,5,9
제갈탄,8,8,5,7,7,8,5,6
제갈량,10,10,2,10,10,8,10,10
서황,8,8,9,5,8,8,7,9
서서,9,8,8,9,7,8,6,9
서성,7,8,9,5,6,7,8,9
심배,6,7,7,8,4,8,7,9
조예,8,8,4,7,9,8,8,6
조휴,5,4,5,3,5,4,7,8
조홍,8,8,6,5,7,8,4,8
조장,6,6,8,4,5,6,5,6
조식,3,5,3,3,4,5,3,2
조진,8,8,8,4,9,8,8,9
조인,9,9,8,6,7,9,4,8
조조,10,10,7,10,8,10,10,5
조상,5,4,3,2,3,5,3,4
조비,10,9,5,9,9,9,9,5
저수,3,8,4,8,8,8,8,9
손권,10,9,9,8,8,9,8,9
손견,8,7,9,7,8,8,6,8
손건,6,7,5,7,7,6,7,7
손호,2,2,3,2,1,2,2,1
손책,9,7,9,7,9,7,7,10
손준,3,4,4,1,1,4,2,1
태사자,8,7,8,6,8,8,6,9
조운,9,9,10,7,9,9,9,9
장각,10,8,9,9,9,9,7,8
장억,8,7,8,7,8,8,7,7
장합,7,7,7,9,7,8,9,7
장홍,6,8,6,8,8,8,7,8
장수,7,8,6,7,7,7,7,8
장소,8,5,1,5,7,8,3,5
장송,7,7,7,8,9,6,9,4
장비,8,9,10,4,5,9,7,9
장포,7,8,8,6,8,7,7,8
장익,7,7,7,7,7,7,6,8
장료,9,6,7,7,9,9,7,9
장로,9,8,2,8,9,6,7,5
진궁,5,8,5,6,6,8,8,8
진군,8,8,1,8,8,8,6,9
진진,9,8,3,8,8,8,3,8
진등,7,8,6,8,7,8,7,7
진무,7,6,7,3,6,7,6,8
진림,1,8,1,8,7,9,2,5
정욱,6,8,7,8,5,8,9,6
정보,8,8,9,8,9,8,8,9
정봉,7,8,9,3,2,6,8,2
전위,4,8,9,4,7,8,5,9
전풍,6,8,4,9,7,8,9,7
등애,7,6,7,6,7,7,8,7
등지,6,7,5,9,8,8,6,8
동승,6,4,2,6,7,4,7,8
동탁,7,8,8,4,3,9,4,5
동차나,7,7,5,4,7,7,4,6
두예,8,9,7,8,7,9,9,8
마속,6,8,2,5,5,8,7,8
마대,6,7,8,8,7,7,6,8
마충,7,7,6,7,9,8,6,8
마초,8,7,9,5,8,7,5,7
마등,7,7,8,5,6,7,5,8
마량,6,4,5,7,9,6,8,8
폐의,7,6,4,4,6,6,5,6
폐시,8,9,5,8,7,9,8,8
미축,4,8,6,8,8,8,8,9
문추,7,7,9,6,6,7,7,7
법정,8,8,6,8,9,8,7,5
방통,4,8,5,9,3,9,10,7
방덕,6,7,8,5,7,7,6,7
보지,6,6,3,5,6,5,5,7
만총,8,8,5,6,8,9,8,9
모개,5,8,3,9,8,8,7,8
맹획,7,7,7,1,5,8,3,4
맹달,3,3,8,3,1,3,5,1
양의,7,7,3,4,4,7,5,7
이회,8,7,8,8,8,7,8,7
이각,7,4,7,3,3,7,5,8
육개,6,6,5,8,6,7,7,8
육강,8,6,5,5,8,7,7,8
육손,9,8,9,8,9,8,9,8
이엄,8,4,9,6,7,5,5,7
이유,7,8,4,8,4,8,9,3
이전,7,8,6,6,8,8,8,8
유기,3,4,3,5,2,3,7,9
유우,7,7,6,5,8,7,6,8
유장,3,1,1,2,1,1,3,1
유심,3,8,4,3,9,8,3,9
유선,2,4,1,1,2,4,1,2
유총,1,5,1,5,2,3,1,5
유비,7,5,8,4,10,5,4,7
유표,5,3,3,5,7,6,4,5
유봉,8,6,8,3,4,8,4,2
요화,8,7,7,8,6,9,6,8
능통,8,8,7,7,8,8,6,8
여범,4,4,4,6,3,5,3,7
여포,6,5,10,1,1,7,3,1
여몽,8,7,8,7,8,7,8,8
한영제,3,4,6,2,5,3,1,3
노숙,7,7,5,9,5,8,8,8
노식,8,4,7,6,8,5,7,9`;
    csvData.split('\n').slice(1).forEach(row => {
        const arr = row.split(',');
        if (arr.length === 9) {
            charStatMap[arr[0].trim()] = arr.slice(1).map(x => +x);
        }
    });

    // === 레이더 차트 그리기 ===
    function drawRadarChart(canvas, stats, labels) {
        const ctx = canvas.getContext('2d');
        const w = canvas.width, h = canvas.height;
        ctx.clearRect(0,0,w,h);
        const cx = w/2, cy = h/2, r = Math.min(w,h)*0.266; // 0.38 * 0.7 = 0.266
        const N = stats.length;
        // 배경 원
        ctx.save();
        ctx.globalAlpha = 0.13;
        ctx.beginPath(); ctx.arc(cx,cy,r+10,0,2*Math.PI); ctx.fillStyle='#b6b6b6'; ctx.fill();
        ctx.globalAlpha = 1;
        // 축선 및 라벨
        // 폰트 높이 계산 (1.76em 기준, 80% of 2.2em)
        const fontSizeEm = 2.2 * 0.8; // 1.76em
        const fontSizePx = fontSizeEm * 16; // assuming 1em = 16px
        ctx.font = `bold ${fontSizeEm}em "Pretendard","Inter",sans-serif`;
        const labelPadding = 12;
        // 라벨을 원에서 한 폰트 거리만큼만 띄움
        const labelRadius = r + fontSizePx;
        for(let i=0;i<N;i++){
            const angle = -Math.PI/2 + i*2*Math.PI/N;
            // '전투력'(index 2)와 '전략전술'(index 6)만 반 폰트 더 바깥쪽
            let thisLabelRadius = labelRadius;
            if (i === 2 || i === 6) thisLabelRadius = r + 0.5 * fontSizePx;
            const x = cx + Math.cos(angle)*thisLabelRadius;
            const y = cy + Math.sin(angle)*thisLabelRadius;
            // 각도에 따라 정렬 동적 설정
            if (Math.abs(Math.cos(angle)) > 0.95) {
                ctx.textAlign = (Math.cos(angle) > 0) ? 'left' : 'right';
                ctx.textBaseline = 'middle';
            } else if (Math.abs(Math.sin(angle)) > 0.95) {
                ctx.textAlign = 'center';
                ctx.textBaseline = (Math.sin(angle) > 0) ? 'top' : 'bottom';
            } else {
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
            }
            ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx+Math.cos(angle)*r,cy+Math.sin(angle)*r); ctx.strokeStyle='#aaa'; ctx.lineWidth=1.2; ctx.stroke();
            ctx.fillStyle = '#444';
            ctx.fillText(labels[i], x, y);
        }
        // 능력치 폴리곤
        ctx.beginPath();
        for(let i=0;i<N;i++){
            const v = stats[i]/10;
            const angle = -Math.PI/2 + i*2*Math.PI/N;
            const x = cx + Math.cos(angle)*r*v;
            const y = cy + Math.sin(angle)*r*v;
            if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        }
        ctx.closePath();
        ctx.fillStyle = 'rgba(70,130,180,0.18)';
        ctx.strokeStyle = '#4682B4';
        ctx.lineWidth = 2.5;
        ctx.fill(); ctx.stroke();
        // 능력치 점
        for(let i=0;i<N;i++){
            const v = stats[i]/10;
            const angle = -Math.PI/2 + i*2*Math.PI/N;
            const x = cx + Math.cos(angle)*r*v;
            const y = cy + Math.sin(angle)*r*v;
            ctx.beginPath(); ctx.arc(x,y,6,0,2*Math.PI);
            ctx.fillStyle = '#4682B4';
            ctx.fill();
            ctx.strokeStyle = '#fff'; ctx.lineWidth = 2; ctx.stroke();
        }
        ctx.restore();
    }
})();
</script>
</body>
</html>
